#!/bin/bash
# Post-removal script for NetSnmp Enterprise

set -e

case "$1" in
    purge|remove)
        echo "Cleaning up NetSnmp Enterprise files..."
        
        # Remove configuration files on purge
        if [[ "$1" == "purge" ]]; then
            if [[ -d /etc/netsnmp ]]; then
                rm -rf /etc/netsnmp
                echo "Removed configuration files"
            fi
            
            if [[ -d /var/cache/netsnmp ]]; then
                rm -rf /var/cache/netsnmp
                echo "Removed cache files"
            fi
            
            if [[ -f /var/log/netsnmp.log ]]; then
                rm -f /var/log/netsnmp.log
                echo "Removed log file"
            fi
        fi
        
        # Reload systemd
        if systemctl daemon-reload >/dev/null 2>&1; then
            echo "Systemd daemon reloaded"
        fi
        ;;
esac

echo "Post-removal cleanup completed."